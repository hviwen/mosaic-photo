请修复以下问题并完成优化调整（按优先级排序）：

---

## 一、问题修复

### P0-1：单张照片裁剪模式 - 显示完整原图而非已裁剪区域

**当前问题：**
- 用户导入多张图片后，系统会自动进行智能排版，对每张照片应用智能裁剪（保存在 `photo.layoutCrop` 或 `photo.crop` 中）
- 用户选中单张照片进入裁剪模式时，显示的是已经被智能裁剪后的区域
- 在已裁剪的基础上再次裁剪没有意义，用户无法看到完整原图内容

**期望行为：**
1. **进入裁剪模式时**：
   - 重置当前照片的裁剪区域为完整原图：`crop = { x: 0, y: 0, width: photo.imageWidth, height: photo.imageHeight }`
   - 保持照片在画布中的显示位置（`cx`、`cy`）和缩放比例（`scale`）不变
   - 其他照片保持原位，并位于选中照片的上层（z-index 更高），形成"固定裁剪框"效果
   - 用户通过拖动/缩放选中照片内容来调整裁剪区域（类似"移动照片内容，裁剪框固定"的交互）

2. **确认裁剪后**：
   - 点击右侧操作区的"确认"按钮，保存新的 `crop` 值
   - 将裁剪后的内容应用到当前照片，恢复与其他照片相同的 z-index
   - **不触发全局重新排版**，仅更新当前照片的裁剪区域
   - 保留完整原图数据（`photo.image` 或 `photo.srcUrl`），以便用户后续再次进入裁剪模式

**涉及文件：**
- `src/stores/mosaic.ts` - `enterCropMode()` 函数：进入裁剪模式时重置 crop 为全图
- `src/components/CanvasStage.vue` - `drawPhoto()` 和 `drawCropOverlay()` 函数：裁剪模式下绘制完整原图
- `src/components/PhotoEditor.vue` - 裁剪交互逻辑：确保用户可以拖动照片内容并确认裁剪

---

### P0-2：照片导入数量限制 - 支持最多 150 张

**当前问题：**
- 导入超过 96 张照片后，后续照片不显示在画布中
- 根据 `.verification-steps.md` 中的日志，可能是布局算法的 tile 切分逻辑存在限制（例如 `minSide` 阈值过大导致无法继续切分）

**期望行为：**
1. **导入限制**：
   - 在 `src/stores/mosaic.ts` 的 `addPhotos()` 函数中添加数量检查
   - 如果用户尝试导入超过 150 张照片，截取前 150 张并显示提示："最多支持导入 150 张照片，已自动选择前 150 张"

2. **布局算法优化**：
   - 检查 `src/composables/useLayout.ts` 中的 `fillArrangePhotos()` 函数和 `src/workers/layoutWorker.ts` 中的 `fillArrangePhotosWorker()` 函数
   - 确保在大批量场景（150 张）下能生成足够的 tiles：
     - 降低 `minSide` 的初始值或加快其衰减速度
     - 在无法继续切分时，强制切分最大矩形（已有 `forceSplitLargestRect()` 兜底逻辑，确保其正常工作）
   - 验证日志输出："Created 150 tiles, needed 150" 和 "Generated 150 placements out of 150 photos"

3. **渲染性能**：
   - 确保 `src/components/CanvasStage.vue` 中的渲染逻辑能处理 150 张照片（可能需要启用渐进式渲染或优化 `drawPhoto()` 函数）

**涉及文件：**
- `src/stores/mosaic.ts` - `addPhotos()` 函数
- `src/composables/useLayout.ts` - `fillArrangePhotos()` 函数
- `src/workers/layoutWorker.ts` - `fillArrangePhotosWorker()` 函数
- `src/components/CanvasStage.vue` - 渲染逻辑

---

### P1-3：原图缩略模块 - 显示人脸检测红框

**当前问题：**
- 右侧编辑栏的"原图缩略"模块仅显示缩略图，未叠加显示人脸检测结果

**期望行为：**
1. 在 `src/components/PhotoEditor.vue` 中定位"原图缩略"模块的渲染代码（可能是一个 `<canvas>` 元素）
2. 当用户选中单张照片后：
   - 调用 `getSmartDetections(photoId)` 获取检测结果
   - 筛选 `kind === 'face'` 的检测框
   - 在缩略图 canvas 上绘制红色矩形框：
     - 样式：`ctx.strokeStyle = 'red'`，`ctx.lineWidth = 2`
     - 坐标映射：将检测框坐标从原图尺寸映射到缩略图尺寸（`scaleX = thumbWidth / imageWidth`，`scaleY = thumbHeight / imageHeight`）
3. 确保检测框随缩略图更新而重新绘制

**涉及文件：**
- `src/components/PhotoEditor.vue` - "原图缩略"模块的渲染逻辑

---

## 二、优化调整

### 优化 1：智能裁剪比例限制

**目标：**
- 限制自动裁剪的最大比例，避免过度裁剪导致内容丢失
- 确保人脸区域有足够的显示空间

**具体要求：**
1. 在 `src/utils/smartCrop.ts` 的 `calculateSmartCrop()` 函数中添加比例限制：
   - 竖图（`imageHeight > imageWidth`）：裁剪后的宽高比不大于 6:4（即 `cropWidth / cropHeight ≤ 1.5`）
   - 横图（`imageWidth > imageHeight`）：裁剪后的宽高比不大于 4:6（即 `cropWidth / cropHeight ≤ 0.67`）
   
2. 如果检测到人脸（`detections` 中包含 `kind === 'face'` 的项）：
   - 确保人脸区域（包括 padding）在裁剪框内的尺寸不小于 100×100 像素
   - 如果无法同时满足比例限制和人脸尺寸要求，优先保证人脸完整显示

**涉及文件：**
- `src/utils/smartCrop.ts` - `calculateSmartCrop()` 函数

---

### 优化 2：布局策略 - 中心放置比例接近的照片

**目标：**
- 优化视觉效果，将长宽比例接近 1:1 的照片放置在画布中心
- 将长条形照片（宽高比偏离 1:1 较大）放置在四周

**具体要求：**
1. 在 `src/composables/useLayout.ts` 的 `fillArrangePhotos()` 函数或 `src/workers/layoutWorker.ts` 的 `fillArrangePhotosWorker()` 函数中：
   - 计算每张照片的宽高比偏离度：`deviation = Math.abs(Math.log(photoAspect))`（越接近 0 表示越接近 1:1）
   - 对 tiles 按位置排序：优先分配中心区域的 tiles（可以按到画布中心的距离排序）
   - 匹配策略：
     - 中心 tiles 优先分配给宽高比接近 1:1 的照片（`deviation` 小的）
     - 边缘 tiles 分配给长条形照片（`deviation` 大的）

2. 保持现有的"宽高比匹配"逻辑（选择与 tile 宽高比最接近的照片），在此基础上叠加"中心优先"策略

**涉及文件：**
- `src/composables/useLayout.ts` - `fillArrangePhotos()` 函数
- `src/workers/layoutWorker.ts` - `fillArrangePhotosWorker()` 函数

---

## 三、验证步骤

完成修复和优化后，请验证：

1. **P0-1 验证**：
   - 导入多张照片，选中单张进入裁剪模式，确认显示的是完整原图（未裁剪状态）
   - 拖动照片内容，点击"确认"，验证裁剪结果正确应用且不触发全局重排

2. **P0-2 验证**：
   - 导入 150 张照片，检查 Console 日志确认生成 150 个 placements
   - 导入 160 张照片，验证提示信息正确显示且仅导入前 150 张

3. **P1-3 验证**：
   - 选中包含人脸的照片，检查右侧"原图缩略"模块是否显示红色检测框

4. **优化 1 验证**：
   - 导入竖图和横图，检查裁剪比例是否符合 6:4 或 4:6 限制
   - 导入包含人脸的照片，确认人脸区域不小于 100×100 像素

5. **优化 2 验证**：
   - 导入混合比例的照片（正方形、横图、竖图），观察布局结果，确认正方形照片更多出现在中心区域